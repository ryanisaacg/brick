word ::= /[A-Za-z_][A-Za-z_0-9]/
integer ::= /[0-9_]/
float ::= integer | integer "." integer
null_literal ::= "null"
char_literal ::= "'" /[^']/ "'"
string_literal ::= "\"" /[^"]/* "\""

statement ::= import | declaration | assignment | function | expression | expression ";" | struct | union | interface
import ::= "import" word
declaration ::= "let" word "=" expression ";"
assignment ::= word "=" expression ";"

function ::= maybe_extern function_header type_annotation block
external_function_declaration ::= "extern" function_header ";"
function_header ::= "fn" word "(" function_args ")"
    function_args ::= word type_annotation |
        word type_annotation "," |
        word type_annotation "," function_args
maybe_extern ::= Îµ | "extern"

struct ::= "struct" word "{" fields "}"
    struct_fields ::= struct_field | struct_field "," | struct_field "," struct_fields
    struct_field ::= word type_annotation | function
interface ::= "interface" word "{" fields "}"
    interface_fields ::= interface_field | interface_field "," | interface_field "," interface_fields
    interface_field ::= word type_annotation | function_header | function

union ::= "union" word "{" union_variants "}"
    union_variants ::= union_variant | union_variant "," | union_variant "," union_variants
    union_variant ::= word "(" type ")" 

type_annotation ::= ":" type
type ::= word | "unique" type | "shared" type | "[" type "]" | type "?"

expression ::= if_expr | while_expr | block | operator | call | "(" expression ")" | array_literal | struct_literal
operator ::= assignment | reference | numeric | boolean | dot
assignment ::= expression "=" expression
reference ::= "shared" expression | "unique" expression
compare ::= expression ">" expression | expression "<" expression
numeric ::= expression "+" expression | expression "-" expression | expression "*" expression | expression "/" expression
dot ::= expression "." word
call ::=  expression "(" call_param ")" | expression "(" call_param ")" |
    expression "[" expression "]" | expression "[" expression "]" 
    call_param ::= expression |
        expression "," |
        expression "," call_param
array_literal ::= "[" expression ";" integer "]" | "[" array_literal_items "]"
    array_literal_items = expression | expression "," | expression "," array_literal_items
dict_literal ::= dict "{" dict_literal_params "}"
    dict_entry ::= word | word ":" expression" | "[" expression "]" ":" expression
    dict_literal_params ::= dict_entry | dict_entry "," | dict_entry "," dict_entry
struct_literal ::= atom | word "{" struct_literal_params "}"
    struct_literal_params ::= word | word "," |
        word "," struct_literal_params |
        word ":" expression | word ":" expression "," |
        word ":" expression "," struct_literal_params
atom ::= word | integer | "-"integer | float | "-"float | null_literal | char_literal | string_literal

if_expr ::= "if" expression block
while_expr ::= "while" expression block
block ::= "{" block_contents "}"
    block_contents ::= statement | statement block_contents
